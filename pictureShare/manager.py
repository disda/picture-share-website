# -*- coding:utf-8 -*-from pictureShare import app, dbfrom flask_script import Managerfrom pictureShare.models import User, Image, Commentimport randomimport unittestmanager = Manager (app)@manager.option ('-p', '--port')  # port 代表执行函数def port(port):    print "port is %s" % portdef get_image_url():    return "http://images.nowcoder.com/head/" + str (random.randint (0, 1000)) + 'm.png'@manager.commanddef init_database():    db.drop_all ()    db.create_all ()    for i in range (0, 100):        db.session.add (User ('User' + str (i + 1), 'pw' + str (i)))        for j in range (0, 3):            db.session.add (Image (get_image_url (), i + 1))            for k in range (0, 3):                db.session.add (Comment ("this is comment:" + str (k), i + 1, i * 3 + j + 1))    User.query.filter_by (id=50).update ({"username": "new"})    db.session.commit ()    print 1, User.query.all ()    print 2, User.query.filter (User.id == 88).all ()@manager.commanddef run_test():    # db.drop_all()    # db.create_all()    tests = unittest.TestLoader ().discover ('./')    unittest.TextTestRunner().run (tests)    passif __name__ == '__main__':  # 脚本管理文件    manager.run ()